<div align="center">

```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•     â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•   â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•
```

**Automatic Traefik route management for Proxmox LXC containers**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Proxmox VE](https://img.shields.io/badge/Proxmox-VE%208+-E57000?logo=proxmox&logoColor=white)](https://www.proxmox.com)
[![Node.js](https://img.shields.io/badge/Node.js-20+-339933?logo=node.js&logoColor=white)](https://nodejs.org)
[![Traefik](https://img.shields.io/badge/Traefik-v3-24A1C1?logo=traefikproxy&logoColor=white)](https://traefik.io)

</div>

---

## âœ¨ What is this?

**Traefik Manager** automatically creates and removes Traefik routes when you create or delete LXC containers on Proxmox VE.

Simply add a few lines in the **Notes** field of your LXC in Proxmox, and the route is created automatically â€” no SSH, no manual config files.

### How it works

```
LXC Notes (Proxmox UI)          Traefik Dynamic Config (auto-generated)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#TRAEFIK_1_NAME=grafana    â†’    grafana.yourdomain.com â†’ http://10.0.1.5:3000
#TRAEFIK_1_PORT=3000            (with SSL via Let's Encrypt)
```

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Proxmox Node                         â”‚
â”‚                                                             â”‚
â”‚  /etc/pve/lxc/105.conf â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  (LXC Notes with #TRAEFIK_ vars)                         â”‚  â”‚
â”‚                                                          â–¼  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    inotify    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  traefik-sync.sh â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚traefik-lxc-      â”‚   â”‚
â”‚  â”‚  (sync engine)   â”‚               â”‚watcher.sh        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚ pct exec                                        â”‚
â”‚           â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    watches    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  LXC Traefik     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  /dynamic/*.yml  â”‚   â”‚
â”‚  â”‚  (VMID 103)      â”‚  file reload  â”‚  (auto-generated)â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  LXC Manager     â”‚  â† Web UI to manage everything       â”‚
â”‚  â”‚  (Node.js app)   â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Quick Install

### Step 1 â€” Install the sync engine on the Proxmox node

```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/youvaKA/Lxc_Traefik_Manager/main/install-node.sh)"
```

This installs on the **Proxmox node**:
- `traefik-sync.sh` â€” the sync engine
- `traefik-lxc-watcher.sh` â€” the inotify watcher
- `traefik-lxc-sync.service` â€” systemd service

### Step 2 â€” Deploy the Web UI (optional but recommended)

```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/youvaKA/Lxc_Traefik_Manager/main/install-manager.sh)"
```

This creates a **dedicated LXC** with the Node.js web interface.

---

## âš™ï¸ Configuration

### LXC Notes syntax

In Proxmox UI â†’ your LXC â†’ **Notes**, add:

```bash
# Single service
#TRAEFIK_1_NAME=myapp
#TRAEFIK_1_PORT=3000

# HTTPS backend (self-signed cert)
#TRAEFIK_2_NAME=myapp-admin
#TRAEFIK_2_PORT=8443
#TRAEFIK_2_SCHEME=https

# Public access (no IP whitelist)
#TRAEFIK_3_NAME=public-api
#TRAEFIK_3_PORT=8080
#TRAEFIK_3_NOAUTH=true

# Your other notes are ignored âœ“
My server notes here...
Installed on 2026-02-25
```

### Generated Traefik config (auto-created)

```yaml
# Auto-generated â€” LXC VMID: 105
http:
  routers:
    lxc-105-myapp:
      rule: "Host(`myapp.yourdomain.com`)"
      service: lxc-105-myapp
      entryPoints: [websecure]
      middlewares: [ip-whitelist, security-headers]
      tls:
        certResolver: letsencrypt
  services:
    lxc-105-myapp:
      loadBalancer:
        servers:
          - url: "http://10.0.1.5:3000"
        passHostHeader: true
```

### Configuration file

Edit `/usr/local/bin/traefik-sync.sh` and adjust:

```bash
BASE_DOMAIN="yourdomain.com"          # Your base domain
TRAEFIK_VMID="103"                    # VMID of your Traefik LXC
CERT_RESOLVER="letsencrypt"           # Traefik cert resolver name
HEALTH_TIMEOUT=5                      # Health check timeout (seconds)
```

---

## ğŸ“– Manual Usage

```bash
# Sync a specific LXC
traefik-sync.sh modify 105

# Sync all LXC containers
traefik-sync.sh sync-all

# Remove routes for a LXC
traefik-sync.sh remove 105

# View status of all LXC routes
traefik-status.sh

# Watch logs
tail -f /var/log/traefik-sync.log
```

---

## ğŸŒ Web Interface

The web UI (installed by `install-manager.sh`) provides:

- ğŸ“‹ **Dashboard** â€” All LXC containers with route status
- âš™ï¸ **Route editor** â€” Add/edit/remove routes via modal UI
- â–¶ï¸ **LXC control** â€” Start/stop containers
- âš¡ **Manual sync** â€” Force sync for one or all LXC
- ğŸ“¡ **Live logs** â€” Real-time sync log stream via SSE

Access at: `https://traefik-manager.yourdomain.com`

---

## ğŸ“‹ Prerequisites

### Proxmox Node
- Proxmox VE 8+
- `inotify-tools` (auto-installed)
- Access to `/etc/pve/lxc/`

### Traefik LXC
- Traefik v3+
- Provider `file` with `watch: true` in `traefik.yaml`:

```yaml
providers:
  file:
    directory: /etc/traefik/dynamic/
    watch: true
```

- A working `certResolver` named `letsencrypt` (or adjust `CERT_RESOLVER`)
- Middlewares `ip-whitelist` and `security-headers` defined in your dynamic config

### DNS
- A wildcard DNS record: `*.yourdomain.com â†’ YOUR_PUBLIC_IP`

---

## ğŸ“ Project Structure

```
Lxc_Traefik_Manager/
â”œâ”€â”€ install-node.sh          # Install sync engine on Proxmox node
â”œâ”€â”€ install-manager.sh       # Deploy Web UI LXC (tteck-style)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ traefik-sync.sh      # Core sync engine
â”‚   â”œâ”€â”€ traefik-lxc-watcher.sh  # inotify watcher
â”‚   â””â”€â”€ traefik-status.sh    # Status script
â”œâ”€â”€ systemd/
â”‚   â””â”€â”€ traefik-lxc-sync.service
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ server.js            # Node.js Express backend
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ public/
â”‚       â””â”€â”€ index.html       # Web UI
â””â”€â”€ docs/
    â””â”€â”€ traefik-example.yml  # Example Traefik config
```

---

## ğŸ¤ Contributing

Contributions are welcome! Feel free to open issues and PRs.

---

## ğŸ“„ License

MIT Â© [youvaKA](https://github.com/youvaKA)
